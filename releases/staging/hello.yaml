---
apiVersion: flux.weave.works/v1beta1
kind: HelmRelease
metadata:
  name: staging
  namespace: staging
  annotations:
    flux.weave.works/automated: "true"
    flux.weave.works/tag.chart-image: glob:s*
spec:
  releaseName: staging
  chart:
    git: git@github.com:sureshamk/hello-flux-helm.git
    path: charts/hello
    ref: staging
  values:
    hello:
      name: api
      image: sureshamk/hello-flux:staging
      imagePullPolicy: IfNotPresent
      ingress:
        enabled: true
        annotations:
          traefik.ingress.kubernetes.io/rule-type: PathPrefixStrip
          nginx.ingress.kubernetes.io/rewrite-target: /
        path: /
        hosts:
        - api.example.com

    # Dependencies values
    dependencies:
      minio:
        enabled: false
    adminer:
      host: admin.example.com
